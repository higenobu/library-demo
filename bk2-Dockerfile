FROM python:3.12-slim

# 例: 必要なビルドツールと PostgreSQL ヘッダ、netcat（openbsd 実装）をインストール
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
      build-essential \
      libpq-dev \
      netcat-openbsd && \
    rm -rf /var/lib/apt/lists/*

# 以下は元の Dockerfile の続き...
WORKDIR /app
COPY requirements.txt /app/requirements.txt
RUN python -m pip install --upgrade pip setuptools wheel \
 && pip install --no-cache-dir -r /app/requirements.txt

COPY . /app
RUN mkdir -p /app/results
VOLUME ["/app/results"]

ENTRYPOINT ["./run.sh"]
CMD ["--config", "config.example.yml"]
